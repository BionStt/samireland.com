{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block css %}
<link rel="stylesheet" type="text/css" href="/static/css/home.css">
{% endblock %}

{% block main %}
<script>
function editText(button, csrf) {
    var paragraphs = $(button).parent().find("p");
    paragraphs.each(function(index, p) {
        p.remove();
    })
    button.remove();
    var form = $(".hidden-form");
    form.show();
}
</script>

<div class="intro big editable">
    {{ text.html|safe }}
    {% if user.is_authenticated %}
    <button class="edit" onclick="editText(this);">Edit</button>
    <form class="hidden-form" method='POST' action='/edit/home/'>
        <textarea name="body">{{ text.body }}</textarea>
        <input type="hidden" name="redirect" value="/">
        {% csrf_token %}
        <input type="submit" value="Save">
    </form>
    {% endif %}
</div>
{% endblock %}
